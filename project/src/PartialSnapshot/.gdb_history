r
list
q
b main
r
ni
n
q
b main
r
n
q
b main
r
n
ni
ni
q
b main
r
n
ni
i t
i threads
thread apply 1 b update
ni
ni
q
b main
r
n
thread apply 1 b update
n
n
i threads
q
b update
r
ni
n
n
q
b main
r
ni
n
q
b main
r
n
ni
step
q
b main
r
n
step
q
b update
r
n
step
n
q
r
q
thread apply all b p_snapshot 
r
q
b main
r
n
thread 2
where
q
r
q
r
q
